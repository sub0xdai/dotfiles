backend = "glx";
vsync = true;
glx-use-copysubbuffer-mesa = true;

glx-copy-from-front = true;
glx-swap-method = 2;
xrender-sync = true;
xrender-sync-fence = true;

# Basic settings
shadow = false;
fading = true;
fade-delta = 8;
no-fading-openclose = false;
inactive-opacity = 0.75;
active-opacity = 0.90;
frame-opacity = 0.75;

# Extra animate
fade-in-step = 0.03;
fade-out-step = 0.03;
transition-length = 250;
transition-pow-x = 0.1;
transition-pow-y = 0.1;

# Simple blur
blur-method = "dual_kawase";
blur-strength = 7;
blur-background = true;
blur-background-frame = true;
blur-background-fixed = true;

# Opacity rules (100 = fully opaque)
opacity-rule = [
  # === BROWSER UNIVERSAL RULES (must be first) ===
  "100:class_g *= 'browser'",
  "100:class_g *= 'Browser'", 
  "100:class_g *= 'Navigator'",
  "100:class_g *= 'firefox'",
  "100:class_g *= 'Firefox'",
  "100:class_g *= 'Chrome'",
  "100:class_g *= 'chrome'",
  "100:class_g *= 'chromium'",
  "100:class_g *= 'Chromium'",
  "100:class_g *= 'zen'",
  "100:class_g *= 'Zen'",
  
  # Video/streaming windows
  "100:name *= 'YouTube'",
  "100:name *= 'Claude'",
  "100:name *= 'localhost'",
  "100:name *= 'kayo'",
  "100:name *= 'paramount'",
  
  # PDF viewers
  "100:class_g = 'Zathura'",
  "100:name *= 'zathura'",
  "100:class_g = 'burp-StartBurp'",
  
  # Your app-specific rules
  "85:class_g = 'Obsidian' && focused",
  "75:class_g = 'Obsidian' && !focused"
];

blur-background-exclude = [
  # System windows
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "_GTK_FRAME_EXTENTS@",
  
  # === BROWSER UNIVERSAL RULES ===
  "class_g *= 'browser'",
  "class_g *= 'Browser'",
  "class_g *= 'Navigator'", 
  "class_g *= 'firefox'",
  "class_g *= 'Firefox'",
  "class_g *= 'Chrome'",
  "class_g *= 'chrome'",
  "class_g *= 'chromium'",
  "class_g *= 'Chromium'",
  "class_g *= 'zen'",
  "class_g *= 'Zen'",
  
  # Fullscreen detection
  "_NET_WM_STATE@ *= '_NET_WM_STATE_FULLSCREEN'",
  
  # Video content
  "name *= 'YouTube'"
];
